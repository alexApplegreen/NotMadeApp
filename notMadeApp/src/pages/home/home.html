<ion-header>
  <ion-navbar>
    <ion-title>Home</ion-title>
  </ion-navbar>
  <script>
    import Cosmic from 'cosmicjs'
  </script>
</ion-header>

<ion-content padding>
  <div class="nm_centered_image">
    <img src="images/notmade_freigestellt.png">
  </div>
  <div class="nm_header">
    <p>
      Alternative Rock | Osnabr√ºck
    </p>
  </div>
  <div class="nm_centered_image">
    <img src="images/divider_black.png">
  </div>
  <div id="nm_gigs_box">
    <h2 style="margin-top: 20px">
      Upcoming Gigs:
    </h2>
  </div>
  <script src="https://unpkg.com/cosmicjs@3.0.1/cosmicjs.browser.min.js"></script>
  <script>
    // TODO fix this shit
    var bucket = Cosmic.bucket({
      slug: 'gigs-upcoming'
    });
    console.log("created bucket");
    bucket.getObject().then(data => {
      var objects = data.objects;
      var markup = '';
      objects.forEach(function(object) {
        console.log(object.title);
        markup += '<div>' + object.title + '</div>';
      });
      document.getElementById('nm_gigs_box').innerHTML = markup
    }).catch(err => {
      console.log(err);
    });
  </script>
</ion-content>
